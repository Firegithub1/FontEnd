<!--
 * @Author: YiFreerFiY
 * @Date: 2022-03-01 08:17:41
 * @LastEditors: YiFreerFiY
 * @LastEditTime: 2022-03-01 09:00:14
 * @FilePath: \JsTest\html\mess\JavaScript 实现下载进度条.htm
 * @Description:
 *
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Document</title>
</head>

<body>
    <progress id='progress1' value="0" max="100">
</progress>
    <button onclick="start_run(100)">下载</button>
    <input type="text" value="0" id="demo">
    <input type="button" onclick="settime()" value="开始加载">
    <input type="button" onclick="clearTimeout(settime())" value="取消加载">

    <script>
        var t = 0;
        var timer;

        function settime() {

            t++;
            document.getElementById("demo").value = t;
            timer = setTimeout("settime()", 100);
            if (t == 50) {
                clearTimeout(timer);
            }
        }

        function start_run(n) {
            if (n === 0) {
                alert("下载完成")
            }
            var progress1 = document.getElementById("progress1")
            n = n - 1
            cur_task = 100 - n
            progress1.value = cur_task
            setTimeout("start_run(" + n + ")", 100);

        }
    </script>
</body>

</html>